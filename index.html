<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Remi Poeni</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f4f8;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    h1 {
        color: #2c3e50;
        margin-top: 20px;
    }
    .container {
        background: #fff;
        padding: 20px;
        margin: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        width: 90%;
        max-width: 400px;
    }
    input, button {
        padding: 10px;
        margin: 5px 0;
        font-size: 16px;
        border-radius: 8px;
        border: 1px solid #ccc;
        width: 100%;
    }
    button {
        background: #3498db;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background: #2980b9;
    }
    ul {
        list-style: none;
        padding: 0;
    }
    li {
        padding: 6px 0;
        border-bottom: 1px solid #eee;
    }
    .history {
        margin-top: 20px;
        background: #ecf0f1;
        padding: 10px;
        border-radius: 8px;
        max-height: 200px;
        overflow-y: auto;
    }
</style>
</head>
<body>

<h1>Remi Poeni</h1>

<div class="container" id="setupDiv">
    <label>Broj igra훾a (2-6):</label>
    <input type="number" id="numPlayers" min="2" max="6">
    <button onclick="setupPlayers()">Dalje</button>
</div>

<div class="container" id="playersDiv" style="display:none;">
    <div id="playerInputs"></div>
    <button onclick="startGame()">Po훾ni igru</button>
</div>

<div class="container" id="gameDiv" style="display:none;">
    <h2>Trenutni djelitelj: <span id="dealerName"></span></h2>
    <div id="scoreInputs"></div>
    <button onclick="updateScores()">A탑uriraj rezultate</button>
    <h3>Rezultati:</h3>
    <ul id="scoreList"></ul>

    <h3>Istorija bodova:</h3>
    <div class="history" id="historyDiv"></div>
</div>

<script>
let state = {
    players: [],
    scores: [],
    dealerIndex: 0,
    history: []
};

function setupPlayers() {
    const num = parseInt(document.getElementById("numPlayers").value);
    if (isNaN(num) || num < 2 || num > 6) return alert("Unesi broj 2-6!");
    state.players = Array(num).fill("").map((_, i) => "");
    state.scores = Array(num).fill(0);

    const playerInputs = document.getElementById("playerInputs");
    playerInputs.innerHTML = "";
    for (let i = 0; i < num; i++) {
        playerInputs.innerHTML += `<input placeholder="Ime igra훾a ${i+1}" id="player${i}">`;
    }

    document.getElementById("setupDiv").style.display = "none";
    document.getElementById("playersDiv").style.display = "block";
}

function startGame() {
    for (let i = 0; i < state.players.length; i++) {
        const name = document.getElementById(`player${i}`).value.trim();
        if (!name) return alert("Unesi sva imena!");
        state.players[i] = name;
    }
    document.getElementById("playersDiv").style.display = "none";
    document.getElementById("gameDiv").style.display = "block";
    renderGame();
}

function renderGame() {
    document.getElementById("dealerName").textContent = state.players[state.dealerIndex];

    const scoreInputs = document.getElementById("scoreInputs");
    scoreInputs.innerHTML = "";
    state.players.forEach((p, i) => {
        scoreInputs.innerHTML += `<input type="number" placeholder="Poeni za ${p}" id="score${i}">`;
    });

    updateScoreList();
}

function updateScores() {
    const roundScores = [];
    for (let i = 0; i < state.players.length; i++) {
        const val = parseInt(document.getElementById(`score${i}`).value);
        if (isNaN(val)) return alert("Unesi sve poene!");
        state.scores[i] += val;
        roundScores.push(`${state.players[i]}: ${val}`);
    }

    state.history.push(roundScores.join(", "));
    state.dealerIndex = (state.dealerIndex + 1) % state.players.length;
    renderGame();
    updateHistory();
}

function updateScoreList() {
    const ul = document.getElementById("scoreList");
    const combined = state.players.map((p,i)=>({name:p,score:state.scores[i]}));
    combined.sort((a,b)=>a.score-b.score); // najbolji najmanji score
    ul.innerHTML = "";
    combined.forEach(c=>{
        ul.innerHTML += `<li>${c.name}: ${c.score}</li>`;
    });
}

function updateHistory() {
    const div = document.getElementById("historyDiv");
    div.innerHTML = "";
    state.history.forEach((r, i) => {
        div.innerHTML += `<div><strong>Runda ${i+1}:</strong> ${r}</div>`;
    });
}
</script>

</body>
</html>
